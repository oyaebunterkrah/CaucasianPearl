@model CaucasianPearl.Models.EDM.OneNews

@using CaucasianPearl.Core.Constants
@using Resources.News
@using Resources.Shared

@{
    ViewBag.Title = string.Format("{0} | {1}", NewsViewRes.NewsCreation, Consts.Title);
}

<script src="@Url.Content("~/content/scripts/sys/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/content/scripts/sys/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/content/scripts/sys/jquery.validate.fix.js")" type="text/javascript"></script>
<script src="@Url.Content("~/ckeditor/ckeditor.js")" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function () {
        CKEDITOR.config.customConfig = '@Url.Content("~/ckeditor/ckeditor_config.js")';
        CKEDITOR.replace('Content');
        CKEDITOR.instances['Content'].setData($('#Content').val());

        $('#submit').click(function () {
            $('#Content').val(CKEDITOR.instances['Content'].getData());
        });
    });
</script>

<p>
    @Html.ActionLink(
        @SharedViewRes.Cancel,
        actionName: Consts.Actions.Index,
        controllerName: Consts.Controllers.OneNews.Name,
        routeValues: new { page = Request.QueryString["page"] },
        htmlAttributes: new { @class = "link" }
    )
</p>

<h2>@NewsViewRes.NewsCreation</h2>

@using (Html.BeginForm())
{
    @Html.EditorForModel(Consts.Templates.Editor)
    
    <input id="submit" type="submit" class="submit" value="@SharedViewRes.Create" />
}
