@model Contact
           
@using CaucasianPearl.Models
@using CaucasianPearl.Core.Constants

<script src="@Url.Content("~/content/js/sys/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/content/js/sys/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

<script>
    var Contact = {
        onComplete: function (content) {
            var result = eval(content.get_response().get_object());
            var textNode = document.createTextNode(result.message);
            document.getElementById("result").appendChild(textNode);
        }
    };
</script>

@{
    Html.EnableClientValidation();
}

@using (Ajax.BeginForm(new AjaxOptions { HttpMethod = "Post", OnComplete = "Contact.onComplete" }))
{
    @Html.ValidationSummary(true, "A few fields are still empty")
    <fieldset>
        <legend>Написать нам</legend>
        <div class="editor-label">
            @Html.LabelFor(m => m.Name)
        </div>
        <div class="editor-field">@Html.TextBoxFor(m => m.Name)
            @Html.ValidationMessageFor(m => m.Name)
        </div>
        <div class="editor-label">
            @Html.LabelFor(m => m.Email)
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(m => m.Email)
            @Html.ValidationMessageFor(m => m.Email)
        </div>
        <div class="editor-label">
            @Html.LabelFor(m => m.Comment)
        </div>
        <div class="editor-field">
            @Html.TextAreaFor(m => m.Comment, 10, 25, null)
            @Html.ValidationMessageFor(m => m.Comment)
        </div>
        <p>
            <input type="submit" value="Отправить" />
        </p>
    </fieldset>

    <p id="result">@TempData["Message"]</p>
}